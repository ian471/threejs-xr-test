<!DOCTYPE html>
<html lang="en">
  <head>
    <title>Ian's Three.js VR Example</title>
    <meta charset="utf-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1.0, user-scalable=no"
    />
    <link
      rel="icon"
      href="https://cdn.glitch.com/c48a1459-2647-4e68-ab7d-d04bb2e611a9%2Ffavicon.ico?v=1615162720391"
    />
    <style>
      html,
      body {
        width: 100%;
        height: 100%;
        margin: 0;
        padding: 0;
        font-family: sans-serif;
      }
      body {
        background-color: #111;
      }
      header {
        position: absolute;
        top: 0;
        left: 25%;
        color: #ccc;
      }
    </style>
  </head>
  <body>
    <header>
      <h1>
        <script>
          document.write(document.title)
        </script>
      </h1>
      <p>Click the button below to start.</p>
      <pre id="log"></pre>
    </header>
    <script type="module">
      import { setupXr } from './xr.js'
      import { setupTestScene } from './testScene.js'

      // Redirect to https, since webXR requires it
      if (window.location.protocol !== 'https:') {
        window.location.protocol = 'https:'
      }

      // Set up a function that logs to the screen, since Oculus browser
      // doesn't have a web console.
      window.log = msg => (window.log.innerHTML += msg?.toString() + '\n')
      window.addEventListener('error', e => log('‚ùå ' + e.message))
      log('Log:')

      const { renderer, scene } = setupXr({ enableDebugPlane: true })
      setupTestScene({ renderer, scene })
    </script>
  </body>
</html>
